// Type definitions for @npmcli/git 2.0.2
// Project: https://github.com/npm/git
// Definitions by: sounisi5011 <https://github.com/sounisi5011>

export = linesToRevs;

/**
 * {@link https://github.com/npm/git/blob/v2.0.2/lib/lines-to-revs.js#L6-L11 Source}
 */
declare function linesToRevs(lines: readonly string[]): PackumentLike;

interface PackumentLike {
    'versions': Record<string, PackumentRefDoc<'tag'>>;
    /**
     * @example
     * {
     *   HEAD: '1.0.0',
     *   latest: '1.0.0',
     * }
     * @see https://github.com/npm/git/blob/aeadf557a32f86dbafd02e288490181ac6b7933b/lib/lines-to-revs.js#L51-L57
     */
    'dist-tags': Record<'HEAD' | 'latest', string>;
    'refs': Record<string, PackumentRefDoc>;
    /**
     * @example
     * {
     *   '6b2501f9183a1753027a9bf89a184b7d3d4602c7': [
     *     'HEAD',
     *     'master',
     *     'refs/heads/master',
     *   ],
     *   '1bc5fba3353f8e1b56493b266bc459276ab23139': [ 'v1.0.0', 'refs/tags/v1.0.0' ],
     * }
     * @see https://github.com/npm/git/blob/aeadf557a32f86dbafd02e288490181ac6b7933b/lib/lines-to-revs.js#L18-L22
     */
    'shas': Record<string, string[]>;
}

interface PackumentRefDoc<TRefType extends PackumentRefType = PackumentRefType> {
    /**
     * @example '1bc5fba3353f8e1b56493b266bc459276ab23139'
     */
    sha: string;
    /**
     * @example 'v1.0.0'
     */
    ref: string;
    /**
     * @example 'refs/tags/v1.0.0'
     */
    rawRef: string;
    type: TRefType;
}

/**
 * @see https://github.com/npm/git/blob/v2.0.2/lib/lines-to-revs.js#L62-L68
 */
type PackumentRefType = 'tag' | 'branch' | 'pull' | 'head' | 'other';
