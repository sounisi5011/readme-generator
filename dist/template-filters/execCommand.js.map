{"version":3,"file":"execCommand.js","sourceRoot":"","sources":["../../src/template-filters/execCommand.ts"],"names":[],"mappings":";;;;;;AAAA,kDAA0B;AAC1B,wDAA+B;AAE/B,oCAAsD;AAE/C,KAAK,UAAU,WAAW,CAAC,OAAgB;;IAC9C,MAAM,KAAK,GAAG,MAAM,IAAI,OAAO,CAAS,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;QACxD,kBAAO,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE;YACzB,IAAI,KAAK,EAAE;gBACP,MAAM,CAAC,KAAK,CAAC,CAAC;aACjB;iBAAM;gBACH,OAAO,CAAC,KAAe,CAAC,CAAC;aAC5B;QACL,CAAC,CAAC,CAAC;IACP,CAAC,CAAC,CAAC;IACH,MAAM,OAAO,GAAkB;QAC3B,GAAG,EAAE,IAAI;QACT,GAAG,EAAE,EAAE,CAAC,kBAAO,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE;KACjC,CAAC;IACF,IAAI,IAAyC,CAAC;IAC9C,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;QAC7B,IAAI,GAAG,eAAK,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;KAC1C;SAAM,IAAI,qBAAa,CAAC,OAAO,CAAC,EAAE;QAC/B,MAAM,CAAC,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,OAAO,CAAC;QAChC,IAAI,GAAG,eAAK,CAAC,IAAI,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;KACrC;IACD,IAAI,CAAC,IAAI,EAAE;QACP,MAAM,IAAI,SAAS,CAAC,mBAAW,CAAA,0BAA0B,OAAO,EAAE,CAAC,CAAC;KACvE;IAED,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC;IAC1B,aAAO,MAAM,CAAC,GAAG,mCAAI,MAAM,CAAC,MAAM,CAAC;AACvC,CAAC;AA3BD,kCA2BC","sourcesContent":["import execa from 'execa';\nimport npmPath from 'npm-path';\n\nimport { errorMsgTag, isStringArray } from '../utils';\n\nexport async function execCommand(command: unknown): Promise<string> {\n    const $PATH = await new Promise<string>((resolve, reject) => {\n        npmPath.get((error, $PATH) => {\n            if (error) {\n                reject(error);\n            } else {\n                resolve($PATH as string);\n            }\n        });\n    });\n    const options: execa.Options = {\n        all: true,\n        env: { [npmPath.PATH]: $PATH },\n    };\n    let proc: execa.ExecaChildProcess | undefined;\n    if (typeof command === 'string') {\n        proc = execa.command(command, options);\n    } else if (isStringArray(command)) {\n        const [file, ...args] = command;\n        proc = execa(file, args, options);\n    }\n    if (!proc) {\n        throw new TypeError(errorMsgTag`Invalid command value: ${command}`);\n    }\n\n    const result = await proc;\n    return result.all ?? result.stdout;\n}\n"]}