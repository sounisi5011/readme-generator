{"version":3,"file":"npmURL.js","sourceRoot":"","sources":["../../src/template-filters/npmURL.ts"],"names":[],"mappings":";;;;;;AAAA,sEAAkC;AAElC,oCAA+E;AAE/E,SAAgB,MAAM,CAAC,WAAoB;IACvC,GAAG;QACC,IAAI,OAAO,WAAW,KAAK,QAAQ,EAAE;YACjC,MAAM,MAAM,GAAG,kBAAU,CAAC,GAAG,EAAE,CAAC,yBAAG,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;YACzD,IAAI,CAAC,MAAM;gBAAE,MAAM;YACnB,IAAI,CAAC,MAAM,CAAC,IAAI,KAAK,KAAK,IAAI,MAAM,CAAC,IAAI,KAAK,SAAS,CAAC,IAAI,wBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;gBACvF,OAAO,MAAM,CAAC,OAAO;oBACjB,CAAC,CAAC,iCAAiC,MAAM,CAAC,IAAI,MAAM,MAAM,CAAC,OAAO,EAAE;oBACpE,CAAC,CAAC,iCAAiC,MAAM,CAAC,IAAI,EAAE,CAAC;aACxD;SACJ;aAAM,IAAI,gBAAQ,CAAC,WAAW,CAAC,EAAE;YAC9B,IAAI,wBAAgB,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,wBAAgB,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE;gBAC7E,OAAO,iCAAiC,WAAW,CAAC,IAAI,MAAM,WAAW,CAAC,OAAO,EAAE,CAAC;aACvF;SACJ;KACJ,QAAQ,KAAK,EAAE;IAChB,MAAM,IAAI,SAAS,CAAC,mBAAW,CAAA,8BAA8B,WAAW,EAAE,CAAC,CAAC;AAChF,CAAC;AAjBD,wBAiBC","sourcesContent":["import npa from 'npm-package-arg';\n\nimport { catchError, errorMsgTag, isNonEmptyString, isObject } from '../utils';\n\nexport function npmURL(packageData: unknown): string {\n    do {\n        if (typeof packageData === 'string') {\n            const result = catchError(() => npa(packageData.trim()));\n            if (!result) break;\n            if ((result.type === 'tag' || result.type === 'version') && isNonEmptyString(result.name)) {\n                return result.rawSpec\n                    ? `https://www.npmjs.com/package/${result.name}/v/${result.rawSpec}`\n                    : `https://www.npmjs.com/package/${result.name}`;\n            }\n        } else if (isObject(packageData)) {\n            if (isNonEmptyString(packageData.name) && isNonEmptyString(packageData.version)) {\n                return `https://www.npmjs.com/package/${packageData.name}/v/${packageData.version}`;\n            }\n        }\n    } while (false);\n    throw new TypeError(errorMsgTag`Invalid packageData value: ${packageData}`);\n}\n"]}